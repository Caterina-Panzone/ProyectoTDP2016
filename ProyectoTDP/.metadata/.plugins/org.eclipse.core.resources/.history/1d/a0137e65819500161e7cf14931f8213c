package Tanques;

import Juego.*;

import java.util.List;
import Poderes.PowerUp;

public class Enemigo extends Tanque{

	//Atributos
	
	protected int velocidadMovimiento;
	protected int velocidadDisparo;
	protected int resistencia;
	protected int puntos;
	protected InteligenciaEnemigo inteligencia; 
	protected List<Enemigo> enemigos; 
	protected int lock; 
	
	//Constructor
	
	public Enemigo(int vm, int vd, int resis, int direc, Celda celda, int puntos, InteligenciaEnemigo inteligencia, List<Enemigo> enemigos){
		super(direc, celda);
		this.enemigos = enemigos; 
		resistencia = resis; 
		velocidadDisparo = vd; 
		velocidadMovimiento = vm; 
		this.puntos= puntos;
		this.inteligencia = inteligencia; 
		lock = 0;
	}
	
	//Comandos
	
	public void actuar(PowerUp poder){
		
	}
	
	public void moverse(){
		boolean nuevaDireccion=true; 
		
		//Si el tanque dejó de moverse.
		
		if(lock<=0){
			nuevaDireccion = inteligencia.moverse(this); 
			lock = tamaño/(velocidadMovimiento*2);  	
		}
		
		//Si la direccion que tiene el tanque es válida se mueve. 
		
		if(nuevaDireccion){
			if(lock==1){
				x = celda.getColumna()*tamaño;
				y = celda.getFila()*tamaño; 
				cambiarImagenActual(direccion);  
			}
			else {//Genera el movimiento continuo del tanque con posiciones. 
				moverseGraficamente();
			}
			lock--;
		}else{
			lock=0; 
		}
	}
	
	public boolean recibirGolpe(Jugador tanque){
		golpesRecibidos++; 
		
		if(resistencia<=golpesRecibidos){
			enemigos.remove(this);
			celda.setTanque(null);
			celda = null; 
			ponerImagenVacia();
		}
		return true; 
	}
	
	public boolean recibirGolpe(Enemigo tanque){
		return false; 
	}
	
	public boolean dispareTanque(Tanque tanque){
		return tanque.recibirGolpe(this);
	}
	
	//Consultas
	
	public int getPuntos(){
		return puntos;
	}
	
	public int getVelocidadDisparo(){
		return velocidadDisparo; 
	}
	
	public int getVelocidadMovimiento(){
		return velocidadMovimiento; 
	}
	
	public int getResistencia(){
		return resistencia; 
	}
}
